{% extends 'core/base.html' %}
{% load static %}


{% block extra_css %}
<link rel="stylesheet" href="{% static 'core/css/lista_disciplinas.css' %}">
{% endblock %}

{% block content %}

<main class="conteudo-principal">

    <!-- CABEÃ‡ALHO -->
    <div class="header-docentes">

        <!-- VOLTAR -->
        <a href="{% url 'listar_turmas' %}">
            <button class="btn-voltar">
                <i class="fa-solid fa-arrow-left"></i>
            </button>
        </a>

        <h1 class="titulo-pagina">
            Disciplinas da Turma 
            <span class="subtitulo-turma">{{ turma.nome }} â€“ {{ turma.turno }}</span>
        </h1>

        <!-- EDITAR + EXCLUIR TURMA (lado direito) -->
        <div style="display:flex; gap:10px;">
            <a href="{% url 'editar_turma' turma.id %}">
                <button class="btn-adicionar" style="background:#1e90ff">
                    <i class="fas fa-pen"></i> 
                </button>
                
            </a>

            <a href="{% url 'excluir_turma' turma.id %}"
               onclick="return confirm('Tem certeza que deseja excluir esta turma e todas as disciplinas dela?');">
                <button class="btn-adicionar" style="background:#d9534f">
                    <i class="fas fa-trash"></i>
                </button>
            </a>
        </div>

    </div>

    <!-- CARD -->
    <div class="card-tabela">

        <!-- BUSCA + BOTÃ•ES -->
        <div class="barra-busca-linha">

            <!-- BUSCA -->
            <div class="barra-busca">
                <form method="get" style="width:100%; display:flex;">
                    <input type="text"
                           name="q"
                           placeholder="Buscar disciplina..."
                           value="{{ query }}">
                </form>
                <i class="fa-solid fa-magnifying-glass"></i>
            </div>

            <!-- AÃ‡Ã•ES AO LADO DA BUSCA -->
            <div style="display:flex; gap:10px;">
                <a href="{% url 'cadastrar_disciplina_turma' turma.id %}">
                    <button class="btn-adicionar">
                        Adicionar Disciplina
                    </button>
                </a>

                <a href="{% url 'grade_horaria' turma.id %}">
                    <button class="btn-grade">
                        ðŸ“… Grade HorÃ¡ria
                    </button>
                </a>
            </div>

        </div>

        <!-- TABELA -->
        <div class="container-tabela">

            <table class="tabela-docentes">
                <thead>
                    <tr>
                        <th class="coluna-nome">Disciplina</th>
                        <th class="coluna-email">Professor</th>
                        <th class="coluna-acoes">AÃ§Ãµes</th>
                    </tr>
                </thead>

                <tbody>
                    {% for disciplina in disciplinas %}
                    <tr>
                        <td>{{ disciplina.nome }}</td>
                        <td>{{ disciplina.professor.nome_completo }}</td>

                        <td class="coluna-acoes">
                            <a href="{% url 'visualizar_disciplinas' disciplina.id %}" title="Visualizar">
                                <i class="fa-solid fa-eye"></i>
                            </a>

                            <a href="{% url 'editar_disciplina' disciplina.id %}" title="Editar">
                                <i class="fa-solid fa-pen"></i>
                            </a>

                            <a href="{% url 'excluir_disciplina' disciplina.id %}"
                               title="Excluir"
                               onclick="return confirm('Deseja realmente excluir esta disciplina?');">
                                <i class="fa-solid fa-trash"></i>
                            </a>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="3" style="text-align:center; padding:15px;">
                            Nenhuma disciplina cadastrada.
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>

            </table>

        </div>

    </div>

</main>

{% endblock %}

{% extends 'core/base.html' %}
{% load static %}

{% block title %}Painel do Superusuário{% endblock %}
{% block header_title %}Painel do Superusuário{% endblock %}

{% block user_info %}
  
  <span>Olá, <a href="{% url 'editar_perfil_super' %}" title="Editar Perfil">{{ request.user.get_full_name|default:request.user.username }}</a></span>
  <a href="{% url 'editar_perfil_super' %}" title="Editar Perfil"><i class="fas fa-user"></i></a>
  <a href="{% url 'painel_super' %}" title="Voltar" class="btn-voltar">
    <i class="fas fa-arrow-left"></i>
  </a>
  <a href="{% url 'logout' %}" title="Sair"><i class="fas fa-power-off"></i></a>
{% endblock %}


{% block extra_css %}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="{% static 'core/css/lista_discentes.css' %}">
{% endblock %}

{% block content %}
<div class="container">
  <div class="top-controls">

    <a href="{% url 'cadastrar_aluno' %}">
      <button class="cadastrar-btn">
        <i class="fas fa-book"></i>
        Cadastrar Discente
      </button>
    </a>

    <form class="buscar-form-container" method="get" action="{% url 'listar_alunos' %}">
      <input type="text" class="buscar-input" name="q" placeholder="Buscar" value="{{ query|default:'' }}">
      <button type="submit" class="buscar-btn">
        <i class="fas fa-search"></i>
      </button>
    </form>
  </div>

  <div class="content-box">
    <h2 class="titulo">DISCENTES CADASTRADOS</h2>

    <table class="tabela-discentes">
      <thead>
        <tr class="tabela-principal">
          <th class="tabela-cabecalho">NOME</th>
          <th class="tabela-cabecalho">IDADE</th>
          <th class="tabela-cabecalho">EMAIL</th>
          <th class="tabela-cabecalho">TURMA</th>
          <th class="tabela-cabecalho">AÇÕES</th>
        </tr>
      </thead>
      <tbody>
        {% for aluno in alunos %}
        <tr class="linhas-tabela">
          <td class="tabela-info">{{ aluno.nome_completo }}</td>
          <td class="tabela-info">{{ aluno.idade }}</td>
          <td class="tabela-info">{{ aluno.user.email }}</td>
          <td class="tabela-info">{{ aluno.turma.nome }}</td>
          <td class="tabela-icones">
            <a href="{% url 'editar_aluno' aluno.id %}" class="action-btn editar" title="Editar">
              <i class="fas fa-pen-to-square"></i>
            </a>
            <a href="{% url 'excluir_aluno' aluno.id %}" class="action-btn deletar" title="Excluir"
              onclick="return confirm('Deseja excluir este aluno?')">
              <i class="fas fa-trash-can"></i>
            </a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="tabela-info">Nenhum aluno encontrado.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

  </div>
</div>
{% endblock %}

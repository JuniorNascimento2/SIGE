{% extends 'core/base.html' %}
{% load static %}

{% block title %}Docentes{% endblock %}
{% block header_title %}Docentes{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'core/css/lista_docentes.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
{% endblock %}

{% block user_info %}
  <span>Olá,
    <a href="{% url 'editar_perfil' %}">
      {{ request.user.get_full_name|default:request.user.username }}
    </a>
  </span>

  <a href="{% url 'editar_perfil' %}">
    <i class="fas fa-user"></i>
  </a>

  <!-- Botão voltar para USUÁRIOS -->
  <a href="{% url 'usuarios' %}" class="btn-voltar">
    <i class="fas fa-arrow-left"></i>
  </a>

  <a href="{% url 'logout' %}">
    <i class="fas fa-power-off"></i>
  </a>
{% endblock %}

{% block content %}

<main class="conteudo-principal">

    <!-- CABEÇALHO NOVO -->
    <div class="header-docentes">

        <a href="{% url 'usuarios' %}">
            <button class="btn-voltar">
                <i class="fa-solid fa-arrow-left"></i>
            </button>
        </a>

        <h1 class="titulo-pagina">Docentes</h1>

        <a href="{% url 'cadastrar_professor' %}">
            <button class="btn-adicionar">Adicionar Docente</button>
        </a>

    </div>

    <!-- CARD PRINCIPAL -->
    <div class="card-tabela">

        <!-- BUSCA -->
        <div class="barra-busca">
            <form method="get" action="{% url 'listar_professores' %}" style="width:100%; display:flex;">
                <input type="text" name="q" placeholder="Buscar docente..." value="{{ query|default:'' }}">
            </form>
            <i class="fa-solid fa-magnifying-glass"></i>
        </div>

        <!-- TABELA -->
        <div class="container-tabela">

            <table class="tabela-docentes">
                <thead>
                    <tr>
                        <th class="coluna-nome">Nome</th>
                        <th class="coluna-email">Email</th>
                        <th class="coluna-acoes">Ações</th>
                    </tr>
                </thead>

                <tbody>
                    {% for professor in professores %}
                    <tr>
                        <td>{{ professor.nome_completo }}</td>
                        <td>{{ professor.user.email }}</td>

                        <td class="coluna-acoes">

                            <a href="{% url 'editar_professor' professor.id %}">
                                <i class="fa-solid fa-pen-to-square acao-editar"></i>
                            </a>

                            <a href="{% url 'excluir_professor' professor.id %}"
                               onclick="return confirm('Deseja excluir este docente?')">
                                <i class="fa-solid fa-trash acao-excluir"></i>
                            </a>

                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="3" style="text-align:center; padding:15px;">
                            Nenhum docente encontrado.
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>

            </table>

        </div>

    </div>

</main>

{% endblock %}
